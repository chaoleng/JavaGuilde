<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åƒåœ¾å›æ”¶ç®—æ³•å¯è§†åŒ–</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #d53369 0%, #daae51 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .back-btn {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            margin-bottom: 20px;
        }

        .control-panel {
            text-align: center;
            margin-bottom: 30px;
        }

        .btn {
            background: linear-gradient(135deg, #d53369 0%, #daae51 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            margin: 5px;
        }

        .main-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .gc-algorithms {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .algorithm-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .algorithm-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(213, 51, 105, 0.3);
        }

        .algorithm-card.active {
            border-color: #d53369;
            background: linear-gradient(135deg, #ffeef4 0%, #fff9ee 100%);
        }

        .algorithm-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .algorithm-desc {
            color: #666;
            line-height: 1.6;
        }

        /* å†…å­˜å¯è§†åŒ–åŒºåŸŸ */
        .memory-visualization {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .memory-cell {
            aspect-ratio: 1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.5s;
            cursor: pointer;
        }

        .memory-cell.empty {
            background: #e9ecef;
            color: #adb5bd;
        }

        .memory-cell.alive {
            background: linear-gradient(135deg, #40c463 0%, #30a14e 100%);
            color: white;
        }

        .memory-cell.dead {
            background: linear-gradient(135deg, #f85149 0%, #da3633 100%);
            color: white;
        }

        .memory-cell.marked {
            background: linear-gradient(135deg, #ffd33d 0%, #eac54f 100%);
            color: #333;
            animation: pulse-mark 1s infinite;
        }

        @keyframes pulse-mark {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 30px;
            height: 30px;
            border-radius: 5px;
        }

        .generation-view {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin: 20px 0;
        }

        .generation-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #d53369;
        }

        .generation-title {
            font-weight: bold;
            color: #d53369;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .keyword { color: #ff79c6; }
        .type { color: #8be9fd; }
        .comment { color: #6272a4; }

        .section-title {
            font-size: 1.8em;
            color: #333;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #d53369;
        }

        .info-box {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
        }

        .collector-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .collector-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .collector-card h3 {
            margin-bottom: 10px;
        }

        .collector-card p {
            font-size: 0.9em;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-btn animate__animated animate__fadeIn">â† è¿”å›ä¸»é¡µ</a>

        <div class="header animate__animated animate__fadeInDown">
            <h1>ğŸ—‘ï¸ åƒåœ¾å›æ”¶ç®—æ³•å¯è§†åŒ–</h1>
            <p>æ·±å…¥ç†è§£GCç®—æ³•åŸç†ä¸åƒåœ¾æ”¶é›†å™¨</p>
        </div>

        <div class="control-panel animate__animated animate__fadeIn">
            <button class="btn" onclick="demonstrateMarkSweep()">ğŸ·ï¸ æ ‡è®°-æ¸…é™¤</button>
            <button class="btn" onclick="demonstrateCopying()">ğŸ“‹ å¤åˆ¶ç®—æ³•</button>
            <button class="btn" onclick="demonstrateMarkCompact()">ğŸ“¦ æ ‡è®°-æ•´ç†</button>
            <button class="btn" onclick="demonstrateGenerational()">ğŸ¯ åˆ†ä»£æ”¶é›†</button>
            <button class="btn" onclick="resetVisualization()">ğŸ”„ é‡ç½®</button>
        </div>

        <div class="main-content animate__animated animate__fadeInUp">
            <!-- GCç®—æ³•é€‰æ‹© -->
            <h2 class="section-title">ğŸ¯ åƒåœ¾å›æ”¶ç®—æ³•</h2>

            <div class="gc-algorithms">
                <div class="algorithm-card" onclick="demonstrateMarkSweep()">
                    <div class="algorithm-title">ğŸ·ï¸ æ ‡è®°-æ¸…é™¤ç®—æ³•</div>
                    <div class="algorithm-desc">
                        <strong>Mark-Sweep</strong><br>
                        åˆ†ä¸º"æ ‡è®°"å’Œ"æ¸…é™¤"ä¸¤ä¸ªé˜¶æ®µã€‚é¦–å…ˆæ ‡è®°æ‰€æœ‰å¯è¾¾å¯¹è±¡ï¼Œç„¶åæ¸…é™¤æœªæ ‡è®°å¯¹è±¡ã€‚
                        <br><br>
                        âœ… ç®€å•ç›´æ¥<br>
                        âŒ äº§ç”Ÿå†…å­˜ç¢ç‰‡<br>
                        âŒ æ ‡è®°æ¸…é™¤æ•ˆç‡ä¸é«˜
                    </div>
                </div>

                <div class="algorithm-card" onclick="demonstrateCopying()">
                    <div class="algorithm-title">ğŸ“‹ å¤åˆ¶ç®—æ³•</div>
                    <div class="algorithm-desc">
                        <strong>Copying</strong><br>
                        å°†å†…å­˜åˆ†ä¸ºä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨ä¸€å—ã€‚GCæ—¶å°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ï¼Œæ¸…ç©ºå½“å‰å—ã€‚
                        <br><br>
                        âœ… æ— å†…å­˜ç¢ç‰‡<br>
                        âœ… æ•ˆç‡é«˜<br>
                        âŒ æµªè´¹50%å†…å­˜
                    </div>
                </div>

                <div class="algorithm-card" onclick="demonstrateMarkCompact()">
                    <div class="algorithm-title">ğŸ“¦ æ ‡è®°-æ•´ç†ç®—æ³•</div>
                    <div class="algorithm-desc">
                        <strong>Mark-Compact</strong><br>
                        æ ‡è®°åä¸æ˜¯ç›´æ¥æ¸…é™¤ï¼Œè€Œæ˜¯å°†å­˜æ´»å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åæ¸…ç†è¾¹ç•Œå¤–å†…å­˜ã€‚
                        <br><br>
                        âœ… æ— å†…å­˜ç¢ç‰‡<br>
                        âœ… å†…å­˜åˆ©ç”¨ç‡é«˜<br>
                        âŒ æ•´ç†è¿‡ç¨‹å¼€é”€å¤§
                    </div>
                </div>

                <div class="algorithm-card" onclick="demonstrateGenerational()">
                    <div class="algorithm-title">ğŸ¯ åˆ†ä»£æ”¶é›†ç®—æ³•</div>
                    <div class="algorithm-desc">
                        <strong>Generational Collection</strong><br>
                        æ ¹æ®å¯¹è±¡å­˜æ´»å‘¨æœŸå°†å†…å­˜åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œé’ˆå¯¹ä¸åŒä»£ä½¿ç”¨ä¸åŒç®—æ³•ã€‚
                        <br><br>
                        âœ… ç»¼åˆå„ç®—æ³•ä¼˜ç‚¹<br>
                        âœ… æ•ˆç‡æœ€é«˜<br>
                        âœ… ç°ä»£JVMä¸»æµæ–¹æ¡ˆ
                    </div>
                </div>
            </div>

            <!-- å†…å­˜å¯è§†åŒ– -->
            <h2 class="section-title" id="visualTitle">ğŸ’¾ å†…å­˜çŠ¶æ€å¯è§†åŒ–</h2>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color alive"></div>
                    <span>å­˜æ´»å¯¹è±¡</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color dead"></div>
                    <span>åƒåœ¾å¯¹è±¡</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color marked"></div>
                    <span>å·²æ ‡è®°</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color empty"></div>
                    <span>ç©ºé—²å†…å­˜</span>
                </div>
            </div>

            <div class="memory-visualization">
                <h3 id="memoryTitle" style="text-align: center; margin-bottom: 20px; color: #d53369;">
                    ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹ä¸åŒGCç®—æ³•æ¼”ç¤º
                </h3>
                <div class="memory-grid" id="memoryGrid"></div>
                <div id="generationView" style="display: none;">
                    <div class="generation-view">
                        <div class="generation-box">
                            <div class="generation-title">æ–°ç”Ÿä»£ (Young Generation)</div>
                            <p><strong>EdenåŒº:</strong> æ–°å¯¹è±¡åˆ†é…</p>
                            <p><strong>SurvivoråŒº:</strong> S0 å’Œ S1</p>
                            <p><strong>GCç±»å‹:</strong> Minor GC</p>
                            <p><strong>ç®—æ³•:</strong> å¤åˆ¶ç®—æ³•</p>
                        </div>
                        <div class="generation-box">
                            <div class="generation-title">è€å¹´ä»£ (Old Generation)</div>
                            <p><strong>å¯¹è±¡æ¥æº:</strong> é•¿æœŸå­˜æ´»å¯¹è±¡</p>
                            <p><strong>GCç±»å‹:</strong> Major GC / Full GC</p>
                            <p><strong>ç®—æ³•:</strong> æ ‡è®°-æ¸…é™¤ æˆ– æ ‡è®°-æ•´ç†</p>
                            <p><strong>è§¦å‘æ¡ä»¶:</strong> è€å¹´ä»£ç©ºé—´ä¸è¶³</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- åƒåœ¾æ”¶é›†å™¨å¯¹æ¯” -->
            <h2 class="section-title">ğŸ”§ ä¸»æµåƒåœ¾æ”¶é›†å™¨</h2>

            <div class="collector-comparison">
                <div class="collector-card">
                    <h3>Serial GC</h3>
                    <p>å•çº¿ç¨‹æ”¶é›†å™¨</p>
                    <p>é€‚ç”¨äºå•CPUç¯å¢ƒ</p>
                    <p>å®¢æˆ·ç«¯æ¨¡å¼é»˜è®¤</p>
                </div>

                <div class="collector-card">
                    <h3>Parallel GC</h3>
                    <p>å¤šçº¿ç¨‹æ”¶é›†å™¨</p>
                    <p>ååé‡ä¼˜å…ˆ</p>
                    <p>æœåŠ¡ç«¯æ¨¡å¼é»˜è®¤</p>
                </div>

                <div class="collector-card">
                    <h3>CMS</h3>
                    <p>å¹¶å‘æ ‡è®°æ¸…é™¤</p>
                    <p>ä½å»¶è¿Ÿä¼˜å…ˆ</p>
                    <p>è€å¹´ä»£æ”¶é›†å™¨</p>
                </div>

                <div class="collector-card">
                    <h3>G1 GC</h3>
                    <p>é¢å‘æœåŠ¡ç«¯åº”ç”¨</p>
                    <p>å¯é¢„æµ‹åœé¡¿æ—¶é—´</p>
                    <p>JDK 9+é»˜è®¤</p>
                </div>

                <div class="collector-card">
                    <h3>ZGC</h3>
                    <p>ä½å»¶è¿Ÿæ”¶é›†å™¨</p>
                    <p>åœé¡¿æ—¶é—´<10ms</p>
                    <p>JDK 11+</p>
                </div>

                <div class="collector-card">
                    <h3>Shenandoah</h3>
                    <p>ä½åœé¡¿æ—¶é—´</p>
                    <p>å¹¶å‘æ•´ç†</p>
                    <p>JDK 12+</p>
                </div>
            </div>

            <!-- GCå‚æ•°é…ç½® -->
            <h2 class="section-title">âš™ï¸ å¸¸ç”¨GCå‚æ•°</h2>

            <div class="code-block">
<span class="comment"># é€‰æ‹©åƒåœ¾æ”¶é›†å™¨</span>
-XX:+UseSerialGC          <span class="comment">// Serial GC</span>
-XX:+UseParallelGC        <span class="comment">// Parallel GC</span>
-XX:+UseConcMarkSweepGC   <span class="comment">// CMS</span>
-XX:+UseG1GC              <span class="comment">// G1 GC</span>
-XX:+UseZGC               <span class="comment">// ZGC (JDK 11+)</span>

<span class="comment"># å †å†…å­˜è®¾ç½®</span>
-Xms2g                    <span class="comment">// åˆå§‹å †å¤§å°</span>
-Xmx4g                    <span class="comment">// æœ€å¤§å †å¤§å°</span>
-Xmn1g                    <span class="comment">// æ–°ç”Ÿä»£å¤§å°</span>

<span class="comment"># GCæ—¥å¿—</span>
-Xlog:gc*:file=gc.log     <span class="comment">// GCæ—¥å¿—è¾“å‡º (JDK 9+)</span>
-XX:+PrintGCDetails       <span class="comment">// æ‰“å°GCè¯¦æƒ… (JDK 8)</span>

<span class="comment"># G1 GCè°ƒä¼˜</span>
-XX:MaxGCPauseMillis=200  <span class="comment">// ç›®æ ‡åœé¡¿æ—¶é—´</span>
-XX:G1HeapRegionSize=16m  <span class="comment">// Regionå¤§å°</span>
            </div>

            <div class="info-box">
                <strong>ğŸ’¡ GCè°ƒä¼˜å»ºè®®ï¼š</strong><br>
                â€¢ ä¼˜å…ˆé€‰æ‹©åˆé€‚çš„åƒåœ¾æ”¶é›†å™¨ï¼Œè€Œéè¿‡åº¦è°ƒä¼˜å‚æ•°<br>
                â€¢ å¤§å¤šæ•°åº”ç”¨ä½¿ç”¨é»˜è®¤GCé…ç½®å³å¯æ»¡è¶³éœ€æ±‚<br>
                â€¢ å…³æ³¨GCæ—¥å¿—ï¼Œåˆ†æåœé¡¿æ—¶é—´å’Œååé‡<br>
                â€¢ åˆç†è®¾ç½®å †å†…å­˜å¤§å°ï¼Œé¿å…é¢‘ç¹Full GC<br>
                â€¢ æ–°ç”Ÿä»£å’Œè€å¹´ä»£æ¯”ä¾‹é€šå¸¸ä¸º 1:2
            </div>

            <!-- å¯¹è±¡æ™‹å‡è§„åˆ™ -->
            <h2 class="section-title">ğŸ“Š å¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£çš„æ¡ä»¶</h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div class="generation-box">
                    <div class="generation-title">1ï¸âƒ£ å¹´é¾„è¾¾åˆ°é˜ˆå€¼</div>
                    <p>å¯¹è±¡åœ¨SurvivoråŒºæ¯ç»å†ä¸€æ¬¡Minor GCï¼Œå¹´é¾„+1</p>
                    <p>é»˜è®¤å¹´é¾„15æ™‹å‡åˆ°è€å¹´ä»£</p>
                    <p>å‚æ•°: -XX:MaxTenuringThreshold</p>
                </div>

                <div class="generation-box">
                    <div class="generation-title">2ï¸âƒ£ å¤§å¯¹è±¡ç›´æ¥è¿›å…¥</div>
                    <p>å¤§å¯¹è±¡ç›´æ¥åœ¨è€å¹´ä»£åˆ†é…</p>
                    <p>é¿å…åœ¨Edenå’ŒSurvivoré—´å¤åˆ¶</p>
                    <p>å‚æ•°: -XX:PretenureSizeThreshold</p>
                </div>

                <div class="generation-box">
                    <div class="generation-title">3ï¸âƒ£ åŠ¨æ€å¹´é¾„åˆ¤æ–­</div>
                    <p>Survivorä¸­ç›¸åŒå¹´é¾„å¯¹è±¡å¤§å°æ€»å’Œ</p>
                    <p>è¶…è¿‡Survivorç©ºé—´ä¸€åŠ</p>
                    <p>è¯¥å¹´é¾„åŠä»¥ä¸Šå¯¹è±¡æ™‹å‡è€å¹´ä»£</p>
                </div>

                <div class="generation-box">
                    <div class="generation-title">4ï¸âƒ£ ç©ºé—´åˆ†é…æ‹…ä¿</div>
                    <p>Minor GCå‰æ£€æŸ¥è€å¹´ä»£ç©ºé—´</p>
                    <p>ç¡®ä¿æ™‹å‡å¯¹è±¡æœ‰è¶³å¤Ÿç©ºé—´</p>
                    <p>å¤±è´¥åˆ™è§¦å‘Full GC</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const gridSize = 40;
        let memoryState = [];

        function initializeMemory() {
            memoryState = Array(gridSize).fill(null).map(() => ({
                status: Math.random() > 0.5 ? 'alive' : 'dead',
                marked: false
            }));
            renderMemory();
        }

        function renderMemory() {
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';

            memoryState.forEach((cell, index) => {
                const cellDiv = document.createElement('div');
                cellDiv.className = `memory-cell ${cell.status}${cell.marked ? ' marked' : ''}`;
                cellDiv.textContent = index + 1;
                grid.appendChild(cellDiv);
            });
        }

        async function demonstrateMarkSweep() {
            document.getElementById('memoryTitle').textContent = 'æ ‡è®°-æ¸…é™¤ç®—æ³•æ¼”ç¤º';
            document.getElementById('generationView').style.display = 'none';
            initializeMemory();

            await sleep(500);

            // æ ‡è®°é˜¶æ®µ
            for (let i = 0; i < gridSize; i++) {
                if (memoryState[i].status === 'alive') {
                    memoryState[i].marked = true;
                    renderMemory();
                    await sleep(50);
                }
            }

            await sleep(1000);

            // æ¸…é™¤é˜¶æ®µ
            for (let i = 0; i < gridSize; i++) {
                if (memoryState[i].status === 'dead') {
                    memoryState[i].status = 'empty';
                    renderMemory();
                    await sleep(50);
                }
            }

            // å–æ¶ˆæ ‡è®°
            memoryState.forEach(cell => cell.marked = false);
            renderMemory();
        }

        async function demonstrateCopying() {
            document.getElementById('memoryTitle').textContent = 'å¤åˆ¶ç®—æ³•æ¼”ç¤º (FromåŒº â†’ ToåŒº)';
            document.getElementById('generationView').style.display = 'none';
            initializeMemory();

            await sleep(500);

            const halfSize = gridSize / 2;
            const newState = Array(gridSize).fill(null).map(() => ({ status: 'empty', marked: false }));

            let toIndex = halfSize;
            for (let i = 0; i < halfSize; i++) {
                if (memoryState[i].status === 'alive') {
                    newState[toIndex] = { status: 'alive', marked: false };
                    memoryState[i].marked = true;
                    renderMemory();
                    await sleep(100);
                    toIndex++;
                }
            }

            memoryState = newState;
            renderMemory();
        }

        async function demonstrateMarkCompact() {
            document.getElementById('memoryTitle').textContent = 'æ ‡è®°-æ•´ç†ç®—æ³•æ¼”ç¤º';
            document.getElementById('generationView').style.display = 'none';
            initializeMemory();

            await sleep(500);

            // æ ‡è®°
            for (let i = 0; i < gridSize; i++) {
                if (memoryState[i].status === 'alive') {
                    memoryState[i].marked = true;
                    renderMemory();
                    await sleep(50);
                }
            }

            await sleep(1000);

            // æ•´ç†
            const compacted = memoryState.filter(cell => cell.status === 'alive')
                .map(cell => ({ status: 'alive', marked: false }));

            while (compacted.length < gridSize) {
                compacted.push({ status: 'empty', marked: false });
            }

            memoryState = compacted;
            renderMemory();
        }

        function demonstrateGenerational() {
            document.getElementById('memoryTitle').textContent = 'åˆ†ä»£æ”¶é›†ç®—æ³•';
            document.getElementById('generationView').style.display = 'block';

            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            grid.style.gridTemplateColumns = 'repeat(15, 1fr)';

            // æ–°ç”Ÿä»£
            for (let i = 0; i < 15; i++) {
                const cell = document.createElement('div');
                cell.className = 'memory-cell alive';
                cell.textContent = i < 9 ? 'E' : (i < 12 ? 'S0' : 'S1');
                cell.style.background = i < 9 ? 'linear-gradient(135deg, #40c463 0%, #30a14e 100%)' :
                    'linear-gradient(135deg, #ffd33d 0%, #eac54f 100%)';
                grid.appendChild(cell);
            }

            // è€å¹´ä»£
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'memory-cell';
                cell.textContent = 'Old';
                cell.style.background = i % 3 === 0 ?
                    'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : '#e9ecef';
                cell.style.color = i % 3 === 0 ? 'white' : '#adb5bd';
                grid.appendChild(cell);
            }
        }

        function resetVisualization() {
            document.getElementById('memoryTitle').textContent = 'ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹ä¸åŒGCç®—æ³•æ¼”ç¤º';
            document.getElementById('generationView').style.display = 'none';
            document.getElementById('memoryGrid').style.gridTemplateColumns = 'repeat(10, 1fr)';
            initializeMemory();
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        window.addEventListener('load', () => {
            initializeMemory();
            setTimeout(() => demonstrateGenerational(), 1000);
        });
    </script>
</body>
</html>