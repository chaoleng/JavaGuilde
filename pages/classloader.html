<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javaç±»åŠ è½½æœºåˆ¶</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="../i18n.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .back-btn {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            margin-bottom: 20px;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .control-panel {
            text-align: center;
            margin-bottom: 30px;
        }

        .btn {
            background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            margin: 0 10px;
            transition: transform 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .main-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        /* åŒäº²å§”æ´¾æ¨¡å‹ */
        .classloader-hierarchy {
            margin: 30px 0;
        }

        .loader-level {
            margin: 20px 0;
            text-align: center;
        }

        .loader-box {
            display: inline-block;
            background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
        }

        .loader-box.active {
            animation: pulse 1.5s infinite;
        }

        .loader-description {
            margin-top: 10px;
            color: #666;
            font-size: 0.9em;
        }

        .arrow-down {
            text-align: center;
            font-size: 2em;
            color: #134e5e;
            margin: 10px 0;
        }

        /* åŠ è½½æµç¨‹ */
        .loading-process {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .process-step {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .process-step.active {
            border-color: #71b280;
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            transform: scale(1.05);
        }

        .step-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px auto;
            font-size: 1.5em;
            font-weight: bold;
        }

        .step-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .step-desc {
            color: #666;
            font-size: 0.95em;
            line-height: 1.6;
        }

        /* ä»£ç ç¤ºä¾‹ */
                .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            font-size: 0.95em;
            line-height: 1.4;
            white-space: pre;
            text-align: left;
            overflow-x: auto;
            tab-size: 4;
            position: relative;
        }
        .code-block::before {
            content: attr(data-lang);
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 0.75em;
            color: #6272a4;
            font-weight: bold;
            text-transform: uppercase;
        }

        .keyword { color: #ff79c6; }
        .type { color: #8be9fd; }
        .method { color: #50fa7b; }
        .string { color: #f1fa8c; }
        .comment { color: #6272a4; }

        /* å§”æ´¾æµç¨‹åŠ¨ç”» */
        .delegation-flow {
            margin: 30px 0;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
            opacity: 0.3;
            transition: all 0.3s;
        }

        .flow-step.active {
            opacity: 1;
            box-shadow: 0 5px 15px rgba(113, 178, 128, 0.3);
        }

        .flow-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5em;
            margin-right: 20px;
            flex-shrink: 0;
        }

        .flow-content {
            flex: 1;
        }

        .flow-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .flow-desc {
            color: #666;
            font-size: 0.9em;
        }

        /* ç±»åŠ è½½å™¨å¯¹æ¯”è¡¨ */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);
            color: white;
            font-weight: bold;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        /* ä¿¡æ¯æ¡† */
        .info-box {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .info-box.success {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }

        .info-box.warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }

        .info-box.info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
        }

        @media (max-width: 768px) {
            .loading-process {
                grid-template-columns: 1fr;
            }
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            }
            50% {
                box-shadow: 0 5px 25px rgba(113, 178, 128, 0.6);
            }
        }

        .section-title {
            font-size: 1.8em;
            color: #333;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #71b280;
        }
    
        /* è¨€èªåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        #language-selector {
            padding: 10px 15px;
            border-radius: 25px;
            border: 2px solid white;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1em;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            font-weight: bold;
        }

        #language-selector:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        #language-selector option {
            background: #764ba2;
            color: white;
        }
    
        /* Prism.js code block styling */
        pre {
            background: #2d2d2d;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        pre code {
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.8;
            text-align: left;
        }
</style>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5/github-markdown.min.css">

    <!-- Prism.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
</head>
<body>
    <!-- è¨€èªåˆ‡ã‚Šæ›¿ãˆ -->
    <div class="language-switcher">
        <select id="language-selector" onchange="window.langSwitcher.changeLanguage(this.value)">
            <option value="zh">ä¸­æ–‡</option>
            <option value="ja">æ—¥æœ¬èª</option>
            <option value="en">English</option>
        </select></div>


    <div class="container">
        <a href="../index.html" class="back-btn animate__animated animate__fadeIn">â† è¿”å›ä¸»é¡µ</a>

        <div class="header animate__animated animate__fadeInDown">
            <h1>ğŸ“š <span data-i18n="classloaderTitle">Javaç±»åŠ è½½æœºåˆ¶</span></h1>
            <p>æ·±å…¥ç†è§£åŒäº²å§”æ´¾æ¨¡å‹ä¸ç±»åŠ è½½å…¨è¿‡ç¨‹</p></div>

        <div class="control-panel animate__animated animate__fadeIn">
            <button class="btn" onclick="startDemo()">â–¶ï¸ æ¼”ç¤ºåŠ è½½æµç¨‹</button>
            <button class="btn" onclick="demonstrateDelegation()">ğŸ”„ åŒäº²å§”æ´¾æ¼”ç¤º</button>
            <button class="btn" onclick="resetDemo()">ğŸ”„ é‡ç½®</button></div>

        <div class="main-content animate__animated animate__fadeInUp">
            <!-- åŒäº²å§”æ´¾æ¨¡å‹ -->
            <h2 class="section-title">ğŸ—ï¸ åŒäº²å§”æ´¾æ¨¡å‹ (Parent Delegation Model)</h2>

            <div class="classloader-hierarchy" id="hierarchy">
                <div class="loader-level">
                    <div class="loader-box" data-loader="bootstrap">
                        ğŸ” å¯åŠ¨ç±»åŠ è½½å™¨ (Bootstrap ClassLoader)</div>
                    <div class="loader-description">
                        åŠ è½½ $JAVA_HOME/lib ä¸‹çš„æ ¸å¿ƒç±»åº“ (rt.jar, charsets.jarç­‰)</div></div>

                <div class="arrow-down">â†“</div>

                <div class="loader-level">
                    <div class="loader-box" data-loader="extension">
                        ğŸ”§ æ‰©å±•ç±»åŠ è½½å™¨ (Extension ClassLoader)</div>
                    <div class="loader-description">
                        åŠ è½½ $JAVA_HOME/lib/ext ç›®å½•ä¸‹çš„æ‰©å±•ç±»åº“</div></div>

                <div class="arrow-down">â†“</div>

                <div class="loader-level">
                    <div class="loader-box" data-loader="application">
                        ğŸ“¦ åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ (Application ClassLoader)</div>
                    <div class="loader-description">
                        åŠ è½½åº”ç”¨ç¨‹åºclasspathä¸‹çš„ç±» (é»˜è®¤ç±»åŠ è½½å™¨)</div></div>

                <div class="arrow-down">â†“</div>

                <div class="loader-level">
                    <div class="loader-box" data-loader="custom">
                        ğŸ¨ è‡ªå®šä¹‰ç±»åŠ è½½å™¨ (Custom ClassLoader)</div>
                    <div class="loader-description">
                        ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨,å¦‚Tomcatçš„WebappClassLoader</div></div></div>

            <div class="info-box success">
                <strong>âœ… åŒäº²å§”æ´¾åŸåˆ™ï¼š</strong><br>
                ç±»åŠ è½½å™¨æ”¶åˆ°åŠ è½½è¯·æ±‚æ—¶,é¦–å…ˆä¸ä¼šè‡ªå·±å°è¯•åŠ è½½,è€Œæ˜¯å°†è¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨ã€‚
                åªæœ‰å½“çˆ¶åŠ è½½å™¨æ— æ³•å®ŒæˆåŠ è½½æ—¶,å­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±åŠ è½½ã€‚
            </div>

            <!-- åŒäº²å§”æ´¾æµç¨‹æ¼”ç¤º -->
            <h2 class="section-title">ğŸ”„ åŒäº²å§”æ´¾æµç¨‹æ¼”ç¤º</h2>

            <div class="markdown-body">
                    <pre><code class="language-java">package com.example;

public class MyClass {
    public static void main(String[] args) {
        System.out.println("Hello ClassLoader!");
    }
}</code></pre>
                </div>

            <div class="delegation-flow" id="delegationFlow">
                <div class="flow-step" data-step="1">
                    <div class="flow-icon">1</div>
                    <div class="flow-content">
                        <div class="flow-title">åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨æ¥æ”¶è¯·æ±‚</div>
                        <div class="flow-desc">è¯·æ±‚åŠ è½½: com.example.MyClass</div></div></div>

                <div class="flow-step" data-step="2">
                    <div class="flow-icon">2</div>
                    <div class="flow-content">
                        <div class="flow-title">å§”æ´¾ç»™æ‰©å±•ç±»åŠ è½½å™¨</div>
                        <div class="flow-desc">åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨å°†è¯·æ±‚å‘ä¸Šå§”æ´¾</div></div></div>

                <div class="flow-step" data-step="3">
                    <div class="flow-icon">3</div>
                    <div class="flow-content">
                        <div class="flow-title">å§”æ´¾ç»™å¯åŠ¨ç±»åŠ è½½å™¨</div>
                        <div class="flow-desc">æ‰©å±•ç±»åŠ è½½å™¨ç»§ç»­å‘ä¸Šå§”æ´¾</div></div></div>

                <div class="flow-step" data-step="4">
                    <div class="flow-icon">4</div>
                    <div class="flow-content">
                        <div class="flow-title">å¯åŠ¨ç±»åŠ è½½å™¨å°è¯•åŠ è½½</div>
                        <div class="flow-desc">åœ¨ $JAVA_HOME/lib ä¸‹æŸ¥æ‰¾,æœªæ‰¾åˆ° âŒ</div></div></div>

                <div class="flow-step" data-step="5">
                    <div class="flow-icon">5</div>
                    <div class="flow-content">
                        <div class="flow-title">æ‰©å±•ç±»åŠ è½½å™¨å°è¯•åŠ è½½</div>
                        <div class="flow-desc">åœ¨ $JAVA_HOME/lib/ext ä¸‹æŸ¥æ‰¾,æœªæ‰¾åˆ° âŒ</div></div></div>

                <div class="flow-step" data-step="6">
                    <div class="flow-icon">6</div>
                    <div class="flow-content">
                        <div class="flow-title">åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨åŠ è½½æˆåŠŸ</div>
                        <div class="flow-desc">åœ¨ classpath ä¸‹æ‰¾åˆ°å¹¶åŠ è½½ MyClass.class âœ…</div></div></div>
            </div>

            <!-- ç±»åŠ è½½å…¨è¿‡ç¨‹ -->
            <h2 class="section-title">âš™ï¸ ç±»åŠ è½½å…¨è¿‡ç¨‹</h2>

            <div class="loading-process" id="loadingProcess">
                <div class="process-step" data-process="1">
                    <div class="step-number">1</div>
                    <div class="step-title">åŠ è½½ (Loading)</div>
                    <div class="step-desc">
                        é€šè¿‡ç±»çš„å…¨é™å®šåè·å–äºŒè¿›åˆ¶å­—èŠ‚æµ,
                        å°†å­—èŠ‚æµè½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„æ•°æ®ç»“æ„,
                        åœ¨å†…å­˜ä¸­ç”ŸæˆClasså¯¹è±¡</div></div>

                <div class="process-step" data-process="2">
                    <div class="step-number">2</div>
                    <div class="step-title">éªŒè¯ (Verification)</div>
                    <div class="step-desc">
                        æ–‡ä»¶æ ¼å¼éªŒè¯ã€å…ƒæ•°æ®éªŒè¯ã€
                        å­—èŠ‚ç éªŒè¯ã€ç¬¦å·å¼•ç”¨éªŒè¯,
                        ç¡®ä¿Classæ–‡ä»¶ç¬¦åˆJVMè§„èŒƒ</div></div>

                <div class="process-step" data-process="3">
                    <div class="step-number">3</div>
                    <div class="step-title">å‡†å¤‡ (Preparation)</div>
                    <div class="step-desc">
                        ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®åˆå§‹å€¼
                        (é›¶å€¼,è€Œéä»£ç ä¸­çš„åˆå§‹å€¼)
                        è¿™äº›å˜é‡å­˜å‚¨åœ¨æ–¹æ³•åŒº</div></div>

                <div class="process-step" data-process="4">
                    <div class="step-number">4</div>
                    <div class="step-title">è§£æ (Resolution)</div>
                    <div class="step-desc">
                        å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨
                        æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹,
                        å¦‚ç±»ã€å­—æ®µã€æ–¹æ³•çš„å¼•ç”¨</div></div>

                <div class="process-step" data-process="5">
                    <div class="step-number">5</div>
                    <div class="step-title">åˆå§‹åŒ– (Initialization)</div>
                    <div class="step-desc">
                        æ‰§è¡Œç±»æ„é€ å™¨&lt;clinit&gt;()æ–¹æ³•,
                        çœŸæ­£åˆå§‹åŒ–ç±»å˜é‡å’Œé™æ€ä»£ç å—,
                        æŒ‰ä»£ç é¡ºåºæ‰§è¡Œ</div></div>
            </div>

            <!-- è¯¦ç»†ç¤ºä¾‹ -->
            <h2 class="section-title">ğŸ’¡ ç±»åŠ è½½è¯¦ç»†ç¤ºä¾‹</h2>

            <div class="markdown-body">
                    <pre><code class="language-java">public class LoadingDemo {
    static int a = 100;           // å‡†å¤‡é˜¶æ®µ:a=0, åˆå§‹åŒ–é˜¶æ®µ:a=100
    static final int b = 200;   // å‡†å¤‡é˜¶æ®µç›´æ¥:b=200 (å¸¸é‡)

    static {
        System.out.println("é™æ€ä»£ç å—æ‰§è¡Œ");  // åˆå§‹åŒ–é˜¶æ®µæ‰§è¡Œ
        a = 300;
    }

    public static void main(String[] args) {
        System.out.println("a = " + a);  // è¾“å‡º: a = 300
    }
}</code></pre>
                </div>

            <div class="info-box info">
                <strong>ğŸ“Œ æ‰§è¡Œé¡ºåºï¼š</strong><br>
                1. å‡†å¤‡é˜¶æ®µ: a = 0, b = 200<br>
                2. åˆå§‹åŒ–é˜¶æ®µ: æ‰§è¡Œé™æ€ä»£ç å—å’Œé™æ€å˜é‡èµ‹å€¼ (a = 100 â†’ a = 300)
            </div>

            <!-- ç±»åŠ è½½å™¨å¯¹æ¯” -->
            <h2 class="section-title">ğŸ“Š ç±»åŠ è½½å™¨å¯¹æ¯”</h2>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>ç±»åŠ è½½å™¨</th>
                        <th>åŠ è½½è·¯å¾„</th>
                        <th>çˆ¶åŠ è½½å™¨</th>
                        <th>å®ç°è¯­è¨€</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>å¯åŠ¨ç±»åŠ è½½å™¨</strong></td>
                        <td>$JAVA_HOME/lib (rt.jarç­‰)</td>
                        <td>null</td>
                        <td>C++</td>
                    </tr>
                    <tr>
                        <td><strong>æ‰©å±•ç±»åŠ è½½å™¨</strong></td>
                        <td>$JAVA_HOME/lib/ext</td>
                        <td>å¯åŠ¨ç±»åŠ è½½å™¨</td>
                        <td>Java</td>
                    </tr>
                    <tr>
                        <td><strong>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨</strong></td>
                        <td>classpath</td>
                        <td>æ‰©å±•ç±»åŠ è½½å™¨</td>
                        <td>Java</td>
                    </tr>
                    <tr>
                        <td><strong>è‡ªå®šä¹‰ç±»åŠ è½½å™¨</strong></td>
                        <td>ç”¨æˆ·æŒ‡å®š</td>
                        <td>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨</td>
                        <td>Java</td>
                    </tr>
                </tbody>
            </table>

            <!-- åŒäº²å§”æ´¾çš„å¥½å¤„ -->
            <h2 class="section-title">âœ¨ åŒäº²å§”æ´¾æ¨¡å‹çš„ä¼˜åŠ¿</h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
                <div class="info-box success">
                    <strong>ğŸ›¡ï¸ é˜²æ­¢æ ¸å¿ƒç±»è¢«ç¯¡æ”¹</strong><br>
                    ä¾‹å¦‚è‡ªå®šä¹‰çš„ java.lang.String æ— æ³•æ›¿ä»£ç³»ç»Ÿçš„Stringç±»,
                    å› ä¸ºä¼šå…ˆç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ç³»ç»ŸString</div>

                <div class="info-box success">
                    <strong>ğŸ”’ é¿å…ç±»çš„é‡å¤åŠ è½½</strong><br>
                    çˆ¶åŠ è½½å™¨å·²ç»åŠ è½½è¿‡çš„ç±»,å­åŠ è½½å™¨ä¸ä¼šå†æ¬¡åŠ è½½,
                    ä¿è¯ç±»çš„å”¯ä¸€æ€§</div>

                <div class="info-box success">
                    <strong>ğŸ¯ ä¿è¯Javaæ ¸å¿ƒAPIå®‰å…¨</strong><br>
                    æ ¸å¿ƒç±»åº“å§‹ç»ˆç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½,
                    ç¡®ä¿Javaå¹³å°çš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§</div>
            </div>

            <!-- è‡ªå®šä¹‰ç±»åŠ è½½å™¨ -->
            <h2 class="section-title">ğŸ¨ è‡ªå®šä¹‰ç±»åŠ è½½å™¨ç¤ºä¾‹</h2>

            <div class="markdown-body">
                    <pre><code class="language-java">public class MyClassLoader extends ClassLoader {

    private String classPath;

    public MyClassLoader(String classPath) {
        this.classPath = classPath;
    }

    // é‡å†™findClassæ–¹æ³•
    @Override
    protected Class<?> findClass(String name) throws ClassNotFoundException {
        try {
            // 1. è¯»å–classæ–‡ä»¶å­—èŠ‚æµ
            byte[] classData = loadClassData(name);

            if (classData == null) {
                throw new ClassNotFoundException();
            }

            // 2. è°ƒç”¨defineClassæ–¹æ³•å°†å­—èŠ‚æµè½¬æ¢ä¸ºClasså¯¹è±¡
            return defineClass(name, classData, 0, classData.length);
        } catch (Exception e) {
            throw new ClassNotFoundException(name);
        }
    }

    private byte[] loadClassData(String className) {
        // è¯»å–classæ–‡ä»¶çš„å®ç°...
        return null;
    }
}</code></pre>
                </div>

            <div class="info-box warning">
                <strong>âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</strong><br>
                â€¢ ä¸æ¨èé‡å†™ loadClass() æ–¹æ³•,è¿™ä¼šç ´ååŒäº²å§”æ´¾æ¨¡å‹<br>
                â€¢ åº”è¯¥é‡å†™ findClass() æ–¹æ³•æ¥å®ç°è‡ªå®šä¹‰åŠ è½½é€»è¾‘<br>
                â€¢ Tomcatç­‰å®¹å™¨ä¸ºäº†å®ç°çƒ­éƒ¨ç½²ä¼šæ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹</div></div>
    </div>

    <script>
        let currentStep = 0;
        let demoInterval = null;

        function startDemo() {
            resetDemo();
            const steps = document.querySelectorAll('[data-process]');
            let index = 0;

            demoInterval = setInterval(() => {
                if (index < steps.length) {
                    steps[index].classList.add('active', 'animate__animated', 'animate__bounceIn');
                    index++;
                } else {
                    clearInterval(demoInterval);
                }
            }, 800);
        }

        function demonstrateDelegation() {
            resetDemo();

            // é«˜äº®ç±»åŠ è½½å™¨å±‚æ¬¡
            const loaders = ['bootstrap', 'extension', 'application', 'custom'];
            let loaderIndex = 0;

            const loaderInterval = setInterval(() => {
                document.querySelectorAll('.loader-box').forEach(box => {
                    box.classList.remove('active');
                });

                if (loaderIndex < loaders.length) {
                    document.querySelector(`[data-loader="${loaders[loaderIndex]}"]`).classList.add('active');
                    loaderIndex++;
                } else {
                    clearInterval(loaderInterval);
                }
            }, 1000);

            // å§”æ´¾æµç¨‹åŠ¨ç”»
            const flowSteps = document.querySelectorAll('[data-step]');
            let stepIndex = 0;

            setTimeout(() => {
                const flowInterval = setInterval(() => {
                    if (stepIndex < flowSteps.length) {
                        flowSteps[stepIndex].classList.add('active', 'animate__animated', 'animate__fadeInLeft');
                        stepIndex++;
                    } else {
                        clearInterval(flowInterval);
                    }
                }, 600);
            }, loaders.length * 1000);
        }

        function resetDemo() {
            clearInterval(demoInterval);

            document.querySelectorAll('.loader-box').forEach(box => {
                box.classList.remove('active');
            });

            document.querySelectorAll('.process-step').forEach(step => {
                step.classList.remove('active', 'animate__animated', 'animate__bounceIn');
            });

            document.querySelectorAll('.flow-step').forEach(step => {
                step.classList.remove('active', 'animate__animated', 'animate__fadeInLeft');
            });
        }

        // é¡µé¢åŠ è½½åè‡ªåŠ¨æ¼”ç¤º
        window.addEventListener('load', () => {
            setTimeout(() => {
                demonstrateDelegation();
            }, 500);
        });
    </script>
</body>
</html>